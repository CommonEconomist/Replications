source("code/functions.R")
setwd("~/Dropbox/Sandbox/picanmix")
options(scipen=5)
library(foreign)
library(stargazer)
load("tidy_data/newData.Rdata")
df<-read.dta("raw_data/data.dta")
source("code/functions.R")
setwd("~/Dropbox/Sandbox/picanmix")
options(scipen=5)
library(foreign)
library(stargazer)
load("tidy_data/newData.Rdata")
df<-read.dta("raw_data/data.dta")
library(countrycode)
library(devtools)
library(foreign)
library(stargazer)
load("tidy_data/newData.Rdata")
df<-read.dta("raw_data/data.dta")
load("raw_data/ucdpConflict.rdata")
source("code/functions.R")
stargazer(df.New[,c("war.onset","onset","ind","index.g","oecd.exp","gdp.g")],
type="text",digits=2,median=TRUE)
onset<-df.New[,c("country","year","war.onset")]
onset<-na.omit(onset[onset$war.onset==1,])
sum(onset[onset$year<=2006,]$war.onset) # 27
sum(onset[onset$year>2006,]$war.onset)  # 5
t1<-na.omit(df.New[,c(1,2,7:10,21)]) # Civil war
t2<-na.omit(df.New[,c(1,2,7:10,19)]) # Civil conflict
t3<-na.omit(df.New[,c(1,2,7:12,21)]) # Civil war, income
t4<-na.omit(df.New[,c(1,2,7:12,19)]) # Civil conflict, income
t0<-t1[t1$year<=2006,]               # Original period, most recent data
africa<-ucdpConflict[ucdpConflict$Region==4 & ucdpConflict$Type==3 |
ucdpConflict$Region==4 & ucdpConflict$Type==4,]
africa$iso3c<-countrycode(africa$Location,"country.name","iso3c",warn=TRUE)
# Remove North African countries
NAf<-c("DZA","MAR","LBY","TUN")
africa$NAf<-as.numeric(africa$iso3c %in% NAf)
africa<-africa[africa$NAf==0,]
## Conflict/war indicators
africa$incidence<-1
africa$war<-as.numeric(africa$IntensityLevel==2)
##  Calculate proportion per year
d<-aggregate(cbind(incidence,war)~Year,
africa[africa$Year>=1980,],FUN=sum)
d$n.countries<-c(rep(46,10),rep(47,3),rep(48,18),rep(49,3))
d$civ.p<-d$incidence/d$n.countries
d$war.p<-d$war/d$n.countries
## Plot
par(mar=c(3,6,5,3),family="serif")
plot(d$Year,d$civ.p,type="n",xlim=c(1978,2017),ylim = c(0,.37),
axes=FALSE,xlab="",ylab="")
# Trimmings
rect(2007,0,2013,.35,col="grey90",lwd=0)                # New data period
lines(d$Year,d$civ.p,lwd=2,lty=1,col="black",type="b")  # Civil conflict
lines(d$Year,d$war.p,lwd=2,lty=2,col="grey10",type="b") # Civil war
# Add labels
text(2015.5,d[34,5],labels="Civil war \n or conflict",cex=1.5)
text(2015.5,d[34,6],labels="Civil war",cex=1.5)
# Axis
axis(1,at=seq(1980,2015,5),tck=0.02, cex.axis=1.5,col="white")
axis(2,at=seq(0,.35,.05),las=1,tck=0.02,cex.axis=1.5,col="white")
text(1980,.36,"Proportion \n of countries",cex=1.5)
setwd("~/Dropbox/Glasnost/Replications/2010_Bruckner_Ciccone")
options(scipen=5)
library(countrycode)
library(devtools)
library(foreign)
library(stargazer)
## Load data and functions
load("tidy_data/newData.Rdata")
df<-read.dta("raw_data/data.dta")
load("raw_data/ucdpConflict.rdata")
source("code/functions.R")
## Create data frames
t1<-na.omit(df.New[,c(1,2,7:10,21)]) # Civil war
t2<-na.omit(df.New[,c(1,2,7:10,19)]) # Civil conflict
t3<-na.omit(df.New[,c(1,2,7:12,21)]) # Civil war, income
t4<-na.omit(df.New[,c(1,2,7:12,19)]) # Civil conflict, income
t0<-t1[t1$year<=2006,]               # Original period, most recent data
#### Descriptive statistics ####
stargazer(df.New[,c("war.onset","onset","ind","index.g","oecd.exp","gdp.g")],
type="text",digits=2,median=TRUE)
## Conflict-onset years
onset<-df.New[,c("country","year","war.onset")]
onset<-na.omit(onset[onset$war.onset==1,])
sum(onset[onset$year<=2006,]$war.onset) # 27
sum(onset[onset$year>2006,]$war.onset)  # 5
#**************************************
##### Conflict proportion #####
#**************************************
## Subset data
africa<-ucdpConflict[ucdpConflict$Region==4 & ucdpConflict$Type==3 |
ucdpConflict$Region==4 & ucdpConflict$Type==4,]
africa$iso3c<-countrycode(africa$Location,"country.name","iso3c",warn=TRUE)
# Remove North African countries
NAf<-c("DZA","MAR","LBY","TUN")
africa$NAf<-as.numeric(africa$iso3c %in% NAf)
africa<-africa[africa$NAf==0,]
## Conflict/war indicators
africa$incidence<-1
africa<-ucdpConflict[ucdpConflict$Region==4 & ucdpConflict$Type==3 |
ucdpConflict$Region==4 & ucdpConflict$Type==4,]
africa$iso3c<-countrycode(africa$Location,"country.name","iso3c",warn=TRUE)
# Remove North African countries
NAf<-c("DZA","MAR","LBY","TUN")
africa$NAf<-as.numeric(africa$iso3c %in% NAf)
africa<-africa[africa$NAf==0,]
## Conflict/war indicators
africa$incidence<-1
africa$war<-as.numeric(africa$IntensityLevel==2)
##  Calculate proportion per year
d<-aggregate(cbind(incidence,war)~Year,
africa[africa$Year>=1980,],FUN=sum)
d$n.countries<-c(rep(46,10),rep(47,3),rep(48,18),rep(49,3))
d$civ.p<-d$incidence/d$n.countries
d$war.p<-d$war/d$n.countries
## Plot
par(mar=c(3,6,5,3),family="serif")
plot(d$Year,d$civ.p,type="n",xlim=c(1978,2017),ylim = c(0,.37),
axes=FALSE,xlab="",ylab="")
# Trimmings
rect(2007,0,2013,.35,col="grey90",lwd=0)                # New data period
lines(d$Year,d$civ.p,lwd=2,lty=1,col="black",type="b")  # Civil conflict
lines(d$Year,d$war.p,lwd=2,lty=2,col="grey10",type="b") # Civil war
# Add labels
text(2015.5,d[34,5],labels="Civil war \n or conflict",cex=1.5)
text(2015.5,d[34,6],labels="Civil war",cex=1.5)
# Axis
axis(1,at=seq(1980,2015,5),tck=0.02, cex.axis=1.5,col="white")
axis(2,at=seq(0,.35,.05),las=1,tck=0.02,cex.axis=1.5,col="white")
text(1980,.36,"Proportion \n of countries",cex=1.5)
#**************************************
d<-df.New[,c("year","country","war","war.onset")]
d[is.na(d)]<-0
d<-aggregate(cbind(war,war.onset)~year,d,FUN=sum)
year<-1981:2013
## Plot data
par(mar=c(3,5,3,3),family="serif")
plot(year,d$war,type="h",axes=F,xlab="",ylab="",
col="gray80",ylim=c(0,8),lwd=20,lend=1)
par(new=TRUE)
plot(year,d$war.onset,type="h",xlab="",ylab="",col="grey20",
axes=FALSE,ylim=c(0,8),lwd=20,lend=1)
# Axis
axis(1,las=1,at=seq(1980,2015,5),tck=0.02,cex.axis=1.5,col="white")
axis(2,las=1,at=seq(0,10,1),tck=0.02,cex.axis=1.5,col="white")
abline(h=seq(0,10,1), col="white",lwd=3)
# Legend
legend(2000,8,c("Ongoing wars","New wars"),
cex=1.5,lwd=10,col=c("gray80","grey20"),bty="n",
y.intersp=c(0.25),x.intersp=c(0.25))
#**************************************
#### TABLE 9 (annex) ####
m1o<-lm(war.onset~index.g+index.g.l+index.g.l2+
factor(ccode)+factor(year)+factor(ccode)*year,t0)
clse(m1o,1,m1o$model[,5])
